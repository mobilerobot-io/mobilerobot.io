<!DOCTYPE html>
<html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
<link rel="stylesheet" href="http://mobilerobot.io/css/style.css">


<title>Control Systems</title>
<body><header class="container">
    <nav class="navbar navbar-expand-lg navbar-light bg-white">
	<a class="navbar-brand text-muted text-monospace" href="http://mobilerobot.io/">Mobile Robot I/O</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
	    <span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse" id="navbarNavAltMarkup">
	    <nav class="navbar-nav justify-content-end">
  	        <a class="nav-link" href="http://mobilerobot.io/projects">projects</a>
  	        <a class="nav-link" href="http://mobilerobot.io/notes">notes</a>
  	        <a class="nav-link" href="http://mobilerobot.io/about">about</a>
 	    </nav>
	</div>
    </nav>
</header>
<div class="jumbotron bg-white">
    <div class="row">
	<div class="col"></div>
	<div class="col-4">
	    <h1 class="text-center header pb-1">Control Systems</h1>
	    <h5 class="leadin text-center text-muted mt-0">
		This project defines the software and hardware that define how the vehical is driven and by what, find out a little more.

	    </h5>
	</div>
	<div class="col"></div>
    </div>
</div>
<div id="main">
<div class="container">
    <div class="row">
        <div class="col"></div>
        <div class="col-8">

<h2 id="problem-definition">Problem Definition</h2>

<p>When setting out to create a Mobile Robot one is faced with a lot of
choices, like how does the robot steer or control itself?  Does it
have, legs, wheels or tracks?  How will it be controlled, through
computer vision, distance sensors or humans?</p>

<h3 id="what-platform-and-language">What Platform and Language?</h3>

<p>You are also have to ask the question, what platform will all this
run on?  Arduino for the sharper hardware support or the raspberry pi
and it&rsquo;s superior computing capabilities and software support?</p>

<h3 id="distributed-systems-true-freedom">Distributed Systems, True Freedom!</h3>

<p>Let the best chip or board win.  If you prefer an Arduino with an
Adafruit motor controller to drive your car, just do it!  Or a
Raspberry Pi and the whole python echo system, then you can do that.</p>

<p>What if you want them both, at the same time?  Heck ya!  We are going
to let an Arduino control the Hardware (mostly) and a Raspberry Pi to
house the software (mostly).</p>

<h3 id="requirements">Requirements</h3>

<p>OK, let&rsquo;s get to laying down some <em>firm</em> requirements. I mean this is
not a hardcore do or die job, so we can be a little flexible with our
guiding design requirements.</p>

<ul>
<li>Both Raspeberry Pi and Arduino&rsquo;s are supported</li>
<li>Interchip communicaiton: i2c, SPI, serial, USB, etc&hellip;</li>
<li>Wireless: Wifi, RF, BT, etc</li>
<li>Camera, stream realtime and/or record video or images</li>
<li>Modular Controller Modules: Human Remote Control, and on board
software control</li>
</ul>

<h2 id="design-alternatives">Design Alternatives</h2>

<h3 id="arduino-raspberry-pi-other">Arduino, Raspberry Pi, Other?</h3>

<p>Let&rsquo;s just make this simple on ourselves, we will support Arduino and
Raspberry Pi (large and small) due to there utter open coolness, large
community and support.  Other boards are welcome, but we have to
resist turning the project into a board support house.</p>

<p>Our focus here is building a communication system for <em>Mobile
Robots</em>.
I also realized that certain applications would exhaust the available
HW resources of an Arduino or Raspberry Pi, but generally speaking I like
the Arduino for <em>dedicated</em> hardware projects that require just a
little communication.  I like the Raspberry Pi for the general purpose Shit</p>

<h3 id="running-out-of-pins">Running out of Pins</h3>

<p>This is were two fundamental problems: The Arduino need to run 2-4 DC
motors to move the bot, 2 servo&rsquo;s to control the camera&rsquo;s.  We are
going to also drive a number of sensors for distance, color, light,
etc.</p>

<p>The bot will have a camera and streaming video.  We will also want
some form of on vehical diagnostics and a corresponding UI.</p>

<p>Pheww, that is a lot to ask of that Arudino, how pins does it have,
but more importantly, how much of it&rsquo;s processing power and
communication capabilities are we going to exhaust?</p>

<h3 id="choosing-a-controller-arduino-vs-raspberry-pi">Choosing a Controller Arduino vs. Raspberry Pi</h3>

<p>This is a topic that demands an entire branch of Engineering is
control systems, or basically: developing an automated system that
responds to various inputs in real-time allowing the safe and accurate
delivery of payload.</p>

<p>For our purposes, we are going to keep it simple and stick making
Decision and choosing between an and Arduino and a raspberry
pie. Although there are plenty of other choices, Let us keep it simple
and focused on the application.</p>

<h2 id="standard-communications">Standard Communications</h2>

<p>On vehical communication can use any of serial (point to point), SPI
or I2C (bus based master / slave communication), USB or ethernet for
high speed stuff.</p>

<p>Off vehical communication will include wifi for
large data transfer when available, the vehical must operate (when
desired) when a wifi signal is not available.</p>

<p>That will complicate things for sure.  But, if done thoughtfully and
with ample testing it will become a flexible and liberating
environment.</p>

<h3 id="thougthful-planning-required">Thougthful Planning Required</h3>

<p>Building a distributed system does have quite a few advantages,
however these advantages do come at some costs.  They are more
complex, but nearly infinitely scalable.</p>

<p>Distributed systems do force a lot more thought upfront about system
design.  Specifically, it requires thourough thought regarding
<em>components</em>, <em>component boundaries</em>, <em>interfaces</em> and <em>APIs</em>.</p>

<h2 id="control-system-structure">Control System Structure</h2>

<h3 id="inputs">Inputs</h3>

<p>The control system will consist of an <em>Input</em>, <em>Output</em> and
<em>Processing</em> components.  It is pretty simple, inputs can come from a
variety sources including a bunch of <em>sensors</em>, <em>video and images</em>
from a camera, <em>distance</em> or <em>location</em> information.</p>

<p>It could be any one, or combo of the above inputs.</p>

<h3 id="outputs">Outputs</h3>

<p>Outputs include, but are NOT limited to controlling a DC motor, or
streaming video to a <em>multicast</em> address, generating noise on a
speaker or producing an LED video.</p>

<p>Some items can even act as all of the above, such as a touch screen
display connected to a camera and the Internet.</p>

<h3 id="state-machine-and-control-process">State Machine and Control Process</h3>

<p>The control process takes what ever inputs are available, applies one
or more algorightms that may produce changes in the state machine,
which in turn may generate an output instruction, based on the
particular algorithm or human control at the time.</p>

<blockquote>
<p>You may now be thinking, this guys has lost his mind, this is some
serious software and hardware development.</p>
</blockquote>

<p>We&rsquo;ll you are right.  This is the real thing, so we are going to be
driven by reliability over introducing features. The good news is that
almost all of the required software will already be written, we just
have to assemble it appropriately.</p>

<blockquote>
<p>We will be taking advantage of a LOT of Open Source Software.</p>
</blockquote>

<h2 id="human-and-or-computer-controlled-vehicals">Human and/or Computer Controlled Vehicals</h2>

<p>Another topic we are leaving flexible, do we want the vehicle to be
Human or Computer controlled?  Again, we say it <em>&ldquo;it depends&rdquo;</em> but we
need to support both.</p>

<p>The control system must allow dynamic and arbitrary switching beteen
<em>Human</em> and <em>Computer</em> or <em>Auto</em> controlled modes.</p>

<h3 id="common-control-interface">Common Control Interface</h3>

<p>To support such a configuration, both computer and human generated
control actions should appear the same to the state machine, and hence
produce appropriate outputs.</p>

<p>The Macro-Controller will be responsible for listening to human or
computer requests, same outputs should produce the same results.</p>

<h2 id="module-and-reusable-software">Module and Reusable Software</h2>

<p>It becomes clear almost right away, that every little change to the
Robots application, <em>hardware</em> and <em>software</em> a hardware configuration
and software rewrite were required.</p>

<p>One of the first problems to solve is avoid having to rewrite software
and minimize hardware changes on a per application basis.  In other
words</p>

<blockquote>
<p>The robot should be as flexible as possible</p>
</blockquote>

<p>We need to be able to change the controls from Human to sensor driven,
sensor to video with out rewriting any code for the remote control or
how the vehicle <em>steers or brakes</em>.</p>

<p>It is imperative that we do not have to rewrite our software evertime
one of these elements change.</p>

<p>To accomplish this goal we were we will separate out the sensor
inputs, gathering them together and feeding them as a stream of data
to our driving/decision making algorithms whatever that may be.</p>

<p>We will mostlikey send our input streams to a <em>message bus</em>, the
consumers on the message bus will be the <em>decision making algorithm</em>
and most likely the logging software.</p>

<h2 id="macro-and-micro-controllers">Macro and Micro Controllers</h2>

<p>Generally speaking, I think our Arduino has an edge on the RPi interms
of hardware support and it&rsquo;s dedication in embedded devices. The
Raspberry Pi, on the other hand has a full scale linux on a
multiprocessor, lending it well to powerful, albiet small and
dedicated tasks, like driving algo&rsquo;s.</p>

<p>With that thought in mind, we are making it a priority of this
development to build on re-usable <em>&ldquo;communicaiton</em>&rdquo; blocks.</p>
</div>
        <div class="col"></div>
    </div> 
</div>

    </div><footer id="footer" class="container">
    <div class="row mt-5 pt-5">
	<div class="col-2"></div>
	<div class="col-8 text-small text-right text-muted">
	    Eddy Consulting, LLC, Copyright 2006-2019
	</div>
    </div>
</footer>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

</body>
</html>
