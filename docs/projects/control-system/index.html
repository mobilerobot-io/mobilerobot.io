<!DOCTYPE html>
<html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
<link rel="stylesheet" href="http://mobilerobot.io/css/style.css">


<title>Control Systems</title>
<body><header class="container">
    <nav class="navbar navbar-expand-lg navbar-light bg-white">
	<a class="navbar-brand text-muted text-monospace" href="http://mobilerobot.io/">Mobile Robot I/O</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
	    <span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse" id="navbarNavAltMarkup">
	    <nav class="navbar-nav justify-content-end">
  	        <a class="nav-link" href="http://mobilerobot.io/projects">projects</a>
  	        <a class="nav-link" href="http://mobilerobot.io/notes">notes</a>
  	        <a class="nav-link" href="http://mobilerobot.io/about">about</a>
 	    </nav>
	</div>
    </nav>
</header>
<div class="jumbotron">
    <div class="row">
	<div class="col-3"></div>
	<div class="col">
	    <h1 class="text-center pb-1">Control Systems</h1>
	    <h5 class="leadin text-center text-muted mt-0">
		The control system is the entire loop of the person or algorithm taking sensor inputs and telling the motor controls what to do the inputs. 

	    </h5>
	</div>
	<div class="col-3"></div>
    </div>
</div>
<div id="main">
<div class="container">
    <div class="row">
        <div class="col"></div>
        <div class="col-8"><p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
The first couple <em>mobile robot</em> kits I played with where awesome, and
really eye opening in terms what they are capable of, but after an
hour of playing with the &ldquo;demo&rdquo; programs, as amazing as they were got
boring pretty quick.</p>

<p>=======
The first couple <em>mobile robot</em> kits I played with where really
awesome, but after an hour of playing with the &ldquo;demo&rdquo; programs, as
amazing as they were got boring pretty quick.  After all, how many
things can you do with a little car that races around a line,
or wander through a shoe box maze and avoid collisions with walls.
Want more from a robot?<!--more-->
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 05f83dde96638c05d5cba69657905d91a6fabeb7</p>

<p>After all, how many things can you do with a little car that races
around a line, or wanders through a contrived mazed avoid collisions
with walls.</p>

<p>How can we combine these neat sensors in a set of software tools that
can be easily re-used to create reconfigurable robots, to some extent
support &ldquo;live&rdquo; hardware swapping?</p>

<h2 id="zero-downtime-software">Zero Downtime Software</h2>

<p>Also, how can we manage the software on a live robot?  This sounds
like a job for industrial strength, <em>distributed system</em> with a
friendly API.  Is it possible?</p>

<p>Oh, it has to be all OpenSource.  It is entirely acceptable, and
preferable to use other well established Open Source products.</p>

<p>Let&rsquo;s see what it takes to move these toy kits to a useful part of our
everyday life.</p>

<h2 id="human-or-computer-controlled-vehical">Human Or Computer Controlled Vehical</h2>

<p>We are going to build a <em>modular</em> control system, both hardware and
software.  There are a number of different hardware configurations we
would like to experiment and work with, likewise, there is a variety
of software configruations and algorithms that we are going to want to
use.</p>

<p>Let&rsquo;s identify a couple key reasons the software has been designed as
modular:</p>

<h3 id="switching-vehical-controllers">Switching Vehical Controllers</h3>

<p>The first thing problem I had was either rewritting or rebuilding a
different example software every time I did a configuration change.</p>

<p>Specifically, there are [at least] three important types software
components that need to be modified for difference configurations:</p>

<ol>
<li><p>Decision inputs: where is the data used to make the driving
decisions coming from?  Sensors, map, vision, human control?</p></li>

<li><p>How is the vehical being controlled, by human or computer
algorightm (remote or local)?</p></li>

<li><p>Steering controls: changes determining on the wheels, motors,
number of each and the chassis design, just to name a few.</p></li>
</ol>

<p>Having said all this, it is imperative the software is broke into
these modules, with well defined interfaces.</p>

<h2 id="limitations-of-hardware">Limitations of Hardware</h2>

<p>The Arduino is the workhorse of the maker world, for very good reason,
but I quickly realized I was running out of pins for all the things I
wanted to attach to Arduino.</p>

<p>A motorshield on one Arduino, and a large number of sensors will
overwhelm the hardware power of one of these devices.  More important,
the processing power can easily become overwhelmed with some of the
smarts required for the driving algorightms and moving time-series
data into the clowd.</p>

<p>For that reason we will setup a Micro/Macro Controller arrangement for
our purpose.</p>

<h2 id="macro-and-micro-controller">Macro and Micro Controller</h2>

<p>Based on the strengths and limitation of our choice of hardware,
Generally speaking, I think our Arduino has an edge on the RPi interms
of hardware support and it&rsquo;s dedication in embedded devices.</p>

<p>The Raspberry Pi, on the other hand has a full scale linux on a
multiprocessor, lending it well to powerful, albiet small and
dedicated tasks, like driving algo&rsquo;s.</p>

<h3 id="macro-controller">Macro Controller</h3>

<p>While the ultimate goal is to create a <em>self driving</em> vehical, that
should not preclude a human from taking control on demand.  As matter
of fact, human intervention or <em>hybrid</em> control is a hard requirement.</p>

<p>Not only Do we need to switch controls from humans, Back-and-forth
between the human and the computer, The communication mechanism the
human uses may change, from Wifi to RFID or Blue Tooth Light.
Joystick, or motion control, etc.</p>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
We have not even begun to speak of camera and live video streams and
<em>Computer Vision</em>.</p>

<h3 id="inputs-and-guidance">Inputs and Guidance</h3>

<p>To guide a vehical safely, requires timely and accurrate system
inputs.  The inputs may come from a variety of different sources,
including but not limitted to cameras and CV, distance detectors,</p>

<h1 id="lidar-gps-and-more">LiDAR, GPS and more.</h1>

<p>Likewise, we will have a variety sensor and camera inputs from
periphereals.
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 05f83dde96638c05d5cba69657905d91a6fabeb7</p>

<h2 id="do-not-rewrite-software">Do NOT Rewrite Software</h2>

<p>It is imperative that we do not have to rewrite our software evertime
one of these elements change.</p>

<p>To accomplish this goal we were we will separate out the sensor
inputs, gathering them together and feeding them as a stream of data
to our driving/decision making algorithms whatever that may be.</p>

<p>We will mostlikey send our input streams to a <em>message bus</em>, the
consumers on the message bus will be the <em>decision making algorithm</em>
and most likely the logging software.</p>

<h3 id="requirements">Requirements</h3>

<ul>
<li>Human controls over Wifi, RFID or BlueTooth</li>
<li>Computer guided algorithms</li>
<li>Inputs include: video, distance sensor, light and color recognition, etc</li>
</ul>

<h2 id="hardware-flexibility-and-extensions">Hardware Flexibility and Extensions</h2>

<p>I also realized that certain applications would exhaust the available
HW resources of an Arduino or Raspberry Pi, but generally speaking I like
the Arduino for <em>dedicated</em> hardware projects that require just a
little communication.  I like the Raspberry Pi for the general purpose Shit</p>

<h2 id="choosing-a-controller-arduino-vs-raspberry-pi">Choosing a Controller Arduino vs. Raspberry Pi</h2>

<p>This is a topic that demands an entire branch of Engineering is
control systems, or basically: developing an automated system that
responds to various inputs in real-time allowing the safe and accurate
delivery of payload.</p>

<p>For our purposes, we are going to keep it simple and stick making
Decision and choosing between an and Arduino and a raspberry
pie. Although there are plenty of other choices, Let us keep it simple
and focused on the application.</p>

<h3 id="arduino-strength-is-realtime-dedicated-hardware">Arduino Strength is RealTime Dedicated Hardware</h3>

<p>Arduino&rsquo;s are loyal, strong soldiers that will faithfully follow
orders, however they are pretty dumb, at least compared to a Raspberry
Pi.</p>

<p>The Raspberry Pi consumes a significant amount of energy, and provides
a tremendous amount of processing power compared to the Arduino.</p>

<p>For now, we are going to keep it cheap and accessable our choices of
hardware micro/macro controllers to be from the Arduino and Raspberry
Pi family of products.</p>

<h3 id="running-out-of-pins">Running out of Pins</h3>

<p>This is were two fundamental problems: The Arduino need to run 2-4 DC
motors to move the bot, 2 servo&rsquo;s to control the camera&rsquo;s.  We are
going to also drive a number of sensors for distance, color, light,
etc.</p>

<p>The bot will have a camera and streaming video.  We will also want
some form of on vehical diagnostics and a corresponding UI.</p>

<p>Pheww, that is a lot to ask of that Arudino, how pins does it have,
but more importantly, how much of it&rsquo;s processing power and
communication capabilities are we going to exhaust?</p></div>
        <div class="col"></div>
    </div> 
</div>

    </div><footer id="footer" class="container">
    <div class="row mt-5 pt-5">
	<div class="col-2"></div>
	<div class="col-8 text-small text-right text-muted">
	    Eddy Consulting, LLC, Copyright 2006-2019
	</div>
    </div>
</footer>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

</body>
</html>
